cmake_minimum_required(VERSION 3.5)

if(DEVICE STREQUAL "")
	set(DEVICE "$ENV{TARGET}")
endif()

if(DEVICE STREQUAL "")
	message(FATAL_ERROR "DEVICE not set")
endif()

if(DEVICE STREQUAL "tanmatsu")
	set(SDKCONFIG_DEFAULTS "sdkconfigs/general;sdkconfigs/tanmatsu")
	set(IDF_TARGET esp32p4)
	set(SDKCONFIG "sdkconfig_tanmatsu")
elseif(DEVICE STREQUAL "kami")
	set(SDKCONFIG_DEFAULTS "sdkconfigs/general;sdkconfigs/kami")
	set(IDF_TARGET esp32)
	set(SDKCONFIG "sdkconfig_kami")
elseif(DEVICE STREQUAL "bornhack-2024")
	set(SDKCONFIG_DEFAULTS "sdkconfigs/general;sdkconfigs/bornhack-2024")
	set(IDF_TARGET esp32c3)
	set(SDKCONFIG "sdkconfig_bornhack2024")
elseif(DEVICE STREQUAL "bornhack-2025")
	set(SDKCONFIG_DEFAULTS "sdkconfigs/general;sdkconfigs/bornhack-2025")
	set(IDF_TARGET esp32c3)
	set(SDKCONFIG "sdkconfig_bornhack2025")
else()
	message(FATAL_ERROR "Unknown target device ${DEVICE}")
endif()

include($ENV{IDF_PATH}/tools/cmake/project.cmake)
project(${DEVICE})
